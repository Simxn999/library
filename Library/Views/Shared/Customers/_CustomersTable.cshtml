@using System.Text
@model Library.ViewModels.CustomersTableViewModel

<div class="col-lg-6">
    <div class="row">
        <div class="col d-flex justify-content-start align-items-center"></div>
        <div class="col d-flex justify-content-center align-items-center">
            <h1>@Model.Title</h1></div>
        <div class="col d-flex justify-content-end align-items-center"></div>
    </div>

	<table class="table table-hover container">
		<thead>
		<tr>
			<th>#</th>
			<th>Fullname</th>
			<th>Phone Number</th>
			<th>Email</th>
			<th>Active Loans</th>
			<th>Expired Loans</th>
			<th>Total Loans</th>
		</tr>
		</thead>
		<tbody>
		@foreach (var customer in Model.Customers)
		{
			<tr role="button"
			    onclick="location.href='@Url.ActionLink("Index", "Customer", new { id = customer.CustomerID })'"
			>
				<th>
					@customer.CustomerID
				</th>
				<td>
					@customer.Fullname
				</td>
				<td>
					@customer.PhoneNumber
				</td>
				<td>
					@customer.Email
				</td>
				<td>
					@customer.Loans.Count(l => l.State == LoanState.Active)
				</td>
				<td>
					@customer.Loans.Count(l => l.State == LoanState.Expired)
				</td>
				<td>
					@customer.Loans.Count
				</td>
			</tr>
		}
		</tbody>
	</table>
</div>